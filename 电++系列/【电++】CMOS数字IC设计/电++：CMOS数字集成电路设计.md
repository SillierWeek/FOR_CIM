# 电++：CMOS数字集成电路设计

## 目录

-   [第1章：基本逻辑门和电路原理](#第1章基本逻辑门和电路原理)
    -   [电容器的能与热](#电容器的能与热)
    -   [电感的量级](#电感的量级)
    -   [二极管电流方程（即PN结电流方程）](#二极管电流方程即PN结电流方程)
    -   [二极管的通断分析方法](#二极管的通断分析方法)
-   [第2章：半导体物理](#第2章半导体物理)
    -   [能级向能带的扩展](#能级向能带的扩展)
    -   [本征材料的导带电子浓度](#本征材料的导带电子浓度)
    -   [电子-空穴对的产生和复合](#电子-空穴对的产生和复合)
    -   [N型半导体](#N型半导体)
    -   [P型半导体](#P型半导体)
    -   [补偿掺杂](#补偿掺杂)
    -   [载流子输运](#载流子输运)
    -   [漂移电流](#漂移电流)
    -   [扩散电流](#扩散电流)
    -   [PN结内建电场（耗尽区）的形成](#PN结内建电场耗尽区的形成)
    -   [PN结的偏置](#PN结的偏置)
    -   [二极管结电容](#二极管结电容)
-   [第3章：MOSFET](#第3章MOSFET)
    -   [栅极氧化物薄层](#栅极氧化物薄层)
    -   [沟道宽长比](#沟道宽长比)
    -   [不由设计所决定的参数](#不由设计所决定的参数)
    -   [MOS管的工作状态](#MOS管的工作状态)
    -   [MOSFET输入特性](#MOSFET输入特性)
    -   [MOSFET输出特性模型](#MOSFET输出特性模型)
    -   [MOSFET分相器](#MOSFET分相器)
    -   [体效应和阈值电压](#体效应和阈值电压)
-   [第4章：金属互连线性质](#第4章金属互连线性质)
    -   [连线电阻](#连线电阻)
    -   [连线电容](#连线电容)
    -   [连线电感](#连线电感)
    -   [互连线RC模型](#互连线RC模型)
-   [第5章：CMOS反相器](#第5章CMOS反相器)
    -   [静态电压转移曲线](#静态电压转移曲线)
    -   [噪声容限](#噪声容限)
    -   [电流转移曲线](#电流转移曲线)
    -   [动态电压转移曲线](#动态电压转移曲线)
    -   [翻转速度模型](#翻转速度模型)
    -   [静态功耗](#静态功耗)
    -   [瞬态功耗](#瞬态功耗)
    -   [短路功耗](#短路功耗)
    -   [功耗与电源电压调整](#功耗与电源电压调整)
    -   [缓冲级](#缓冲级)
-   [第6章：CMOS“与非”门、“或非”门和传输门](#第6章CMOS与非门或非门和传输门)
    -   [与非门、或非门的晶体管尺寸调整](#与非门或非门的晶体管尺寸调整)
    -   [通过门](#通过门)
    -   [CMOS传输门](#CMOS传输门)
    -   [实现三态的方法](#实现三态的方法)
-   [第7章：CMOS电路设计风格](#第7章CMOS电路设计风格)
    -   [互补静态风格的设计准则与德摩根律](#互补静态风格的设计准则与德摩根律)
    -   [动态CMOS逻辑门](#动态CMOS逻辑门)
    -   [动态电路的电荷共享](#动态电路的电荷共享)
    -   [多米诺CMOS逻辑门](#多米诺CMOS逻辑门)
    -   [NORA CMOS逻辑门](#NORA-CMOS逻辑门)
    -   [通过逻辑门](#通过逻辑门)
    -   [CMOS传输逻辑门](#CMOS传输逻辑门)
    -   [功耗及活跃系数](#功耗及活跃系数)
-   [第8章：时序逻辑门设计与时序](#第8章时序逻辑门设计与时序)
    -   [CMOS锁存器](#CMOS锁存器)
    -   [边沿触发存储元件](#边沿触发存储元件)
    -   [边沿触发时序规则](#边沿触发时序规则)
    -   [时钟生成电路与锁相环](#时钟生成电路与锁相环)
    -   [金属互连线寄生效应的影响](#金属互连线寄生效应的影响)
    -   [整体系统时序](#整体系统时序)
    -   [时序的不确定性](#时序的不确定性)
-   [第9章：IC存储器电路](#第9章IC存储器电路)
    -   [存储器电路结构](#存储器电路结构)
    -   [存储器单元](#存储器单元)
    -   [存储器译码](#存储器译码)
    -   [读操作](#读操作)
    -   [写操作](#写操作)
    -   [DRAM](#DRAM)
-   [第10章：PLA、CPLD与FPGA](#第10章PLACPLD与FPGA)
    -   [可编程晶体管](#可编程晶体管)
    -   [PLA](#PLA)
    -   [CPLD](#CPLD)
    -   [先进CPLD示例](#先进CPLD示例)
    -   [FPGA](#FPGA)
    -   [FPGA实例](#FPGA实例)
    -   [编程写入技术](#编程写入技术)
-   [第11章：CMOS电路版图](#第11章CMOS电路版图)
    -   [版图和DR](#版图和DR)
    -   [棒图](#棒图)
    -   [实例：2微米设计规则](#实例2微米设计规则)
    -   [电路提取](#电路提取)
-   [第12章：芯片是如何制作的](#第12章芯片是如何制作的)
    -   [晶圆制备](#晶圆制备)
    -   [生产线](#生产线)
    -   [硅的氧化](#硅的氧化)
    -   [光刻](#光刻)
    -   [蚀刻](#蚀刻)
    -   [沉积和扩散](#沉积和扩散)
    -   [清洁和安全性操作](#清洁和安全性操作)
    -   [晶体管的制造](#晶体管的制造)
    -   [溅射工艺](#溅射工艺)
    -   [双金属镶嵌](#双金属镶嵌)
    -   [层间电介质](#层间电介质)
    -   [制造一个双阱CMOS反相器](#制造一个双阱CMOS反相器)
    -   [封测](#封测)

Charles Hawkins,Jaume Segura,Payman Zarkesh-Ha

王昱阳,尹说 译；陈虹 审校

电子版资源已经下载到本地

0714

# 第1章：基本逻辑门和电路原理

#### 电容器的能与热

设电容C\_L、电阻R及电源V\_B串接

![](image_PL8wVzoz-s.png)

设电容充放电频率为f，则其驱动电路热功率为P=C \*(V\_B^2)\*f

#### 电感的量级

电感在IC中常见的量级为pH

#### 二极管电流方程（即PN结电流方程）

![](image_YrvH5Xtd4H.png)

![](image_jgcRPSyhJ2.png)

#### 二极管的通断分析方法

![](image_IXNvunegGW.png)

![](image_5UHtEclK0s.png)

# 第2章：半导体物理

#### 能级向能带的扩展

![](image_PF1saeXrvj.png)

0715

#### 本征材料的导带电子浓度

纯净的硅晶体称作本征半导体

![](image_mp51OCeo07.png)

这里玻尔兹曼常数可以换作ueV/K表示的道理在于J和eV为同一量纲，也即下面除以的当量1.60219E-19J/eV就等于1

E\_g就是前述的带隙

\*B的单位应为cm^-3/K^(-3/2)

![](image_tDfpkwc7Fx.png)

此书将室温下本征Si的电子浓度当作一个常用的常量，后面很多题目均基于这个常量

#### 电子-空穴对的产生和复合

![](image_AueoACL8UB.png)

#### N型半导体

掺杂的五价原子的5个价电子中，4个用来与邻近的硅原子成键，剩下1个室温下即可被激发到导带，在固体中自由移动。该电子纯由杂质原子供给，**跃迁时并不产生空穴**，此时杂质原子被称为**施主**，通过控制施主浓度可使导带电子浓度近似等于施主浓度（远大于本征半导体中因热激发产生的本征载流子浓度）

![](image_sttSBHgI1Q.png)

![](image_EatQf60dII.png)

对于N型半导体，当施主原子向导带提供的电子数目远大于热电子-空穴对的数目时，便有n\_0≈N\_D，其中N\_D为施主原子浓度。据此有

![](image_qLoibYaH1e.png)

注意：掺杂前后，半导体材料始终是电中性的

#### P型半导体

杂质原子为三价元素原子，称为受主。受主在带隙靠近价带一侧产生一个杂质能级，室温下价带电子有足够能量跃迁到杂质能级，跃迁之后在硅中留下一个空穴

\*该书中N\_A表示受主浓度，不是阿伏伽德罗常数

将p\_0代为N\_A以后，上述(2-2)式依然适用

#### 补偿掺杂

补偿掺杂的半导体表现为P型还是N型（抑或是本征半导体），由N\_A和N\_D的相对大小决定

对于补偿掺杂，仍有关系c\_少数=n\_i^2/c\_净掺杂，c\_净掺杂就是N\_A和N\_D的差的绝对值

#### 载流子输运

电子与空穴的净迁移称为载流子输运。其影响因素含有以下方面：

——（碰撞）散射，散射的增加会降低载流子的迁移率

——温度，影响原子的热振动及载流子浓度从而影响迁移

——外电场，只有施加电场提供偏压以后定向输运才可形成

\*载流子的迁移率μ是指单位电场强度下所产生的载流子平均漂移速度，单位常取cm/(V·s)，满足v=μE，v为电子移动速率，E为场强

#### 漂移电流

外加电场下载流子服从电场规律的定向运动

![](image_Pgv7lBPbxs.png)

注意：式中v由载流子的移动速率和载流子的电荷量相乘得到（？）

(2-8)式把E提出，其系数(μ\_n+μ\_p)q就是电导率σ

#### 扩散电流

浓度差带来的粒子顺浓度梯度的定向运动（热运动本身是不定向的，顺浓度差的扩散整体上是定向的）

![](image_I5i465fYUH.png)

![](image_gCumjeBG3W.png)

这里因为取绝对值，应把梯度也加上绝对值号；D的量纲是(面积/时间)

![](image_BX5lbvuZhd.png)

#### PN结内建电场（耗尽区）的形成

两块掺杂类型相异的导体，其边缘处载流子浓度梯度甚大。当它们接触后，在浓度梯度下扩散立即发生，越过交界面的载流子到达PN结另一侧成为少子，并与该侧的载流子（多子）复合，如此则这越界的电荷被对侧的多子中和了，因而在交界面附近对侧的位置留下**电离的掺杂原子**，使得该位置显电性且与该侧多子极性恰好相反。交界面两侧电离的掺杂原子就形成了一个方向与P-N方向相反的内建电场，该区内最终稳定时，扩散力恰与内电场力平衡而使净扩散不再发生，施主、受主原子均完全电离，内建电场将清除所有自由电荷

内电场以外的区域仍是电中性的P型/N型半导体，平衡时无所谓电场的作用且等势

![](image_77VECoKZ7N.png)

![](image_rucwAyomBp.png)

V\_T就是26mV

![](image_2ue7TMOtfG.png)

0716

#### PN结的偏置

正偏时，外加电场削弱内建电场，利于扩散，各区多子向对侧扩散，同时在电源得到补充；

反偏时，外加电场增强内建电场，PN结内少数受热激发的载流子被内电场加速，形成反向泄漏电流（沿外加电压的方向），其参考值为反向偏置饱和电流I\_S

![](image_x3WARZV-M4.png)

#### 二极管结电容

![](image_47KRnQMPSk.png)

0719

# 第3章：MOSFET

#### 栅极氧化物薄层

栅极氧化物薄层T\_ox是硅氧化形成的非晶态无定型二氧化硅，只有几十到一百埃厚，也即几个二氧化硅分子的厚度。栅氧层的作用是为栅极电压形成的电场提供支持以影响源、漏之间移动电荷数，该层越薄栅极的控制作用越好

#### 沟道宽长比

源、漏之间的距离称为沟道长度L，相应的横向尺寸称为沟道宽度W，W/L称为宽长比，线性相关于i\_DS

#### 不由设计所决定的参数

氧化物厚度、阈值电压、掺杂水平等参数是由制造工艺而非设计决定的

0721

#### MOS管的工作状态

见书籍3.1.3即可

若沟道的横向场强与栅氧层的纵向场强相当或小于纵向场强，则沿器件长度L方向反型沟道几乎是等宽均匀的，进入可变电阻态=电阻偏置态（ohmic bias state）=非饱和态（nonsaturated）=线性态（不是严格线性，I\_D-V\_D图在一开始i,v都甚小时近似线性，随后弯曲）

此时，漏-源等效为短路，且NMOS有V\_GD>V\_TH（即V\_GS>V\_DS+V\_TH）,PMOS有V\_DG>-V\_TH（即V\_GS\<V\_DS+V\_TH）

反之，在开启状态下则发生夹断，进入饱和区=恒流区，此时NMOS有V\_GD\<V\_TH，PMOS有V\_DG\<V\_TH，即（二者都是）漏-栅之间的P-N 结反偏了，此时仍有电流是夹断位置氧化层下方耗尽层的强电场使然，载流子仍可被抽入漏-体之间的强电场。这通常不是数字CMOS希望的区域

求取MOS管的工作状态可由各端电位得出，也可据输出特性模型中的关系求出电流来间接求得电位，期间可能用到假设检验的方法

#### MOSFET输入特性

指的是令MOS管工作在**线性区**时的I\_DS(I\_D)-V\_GS关系，漏-源之间加一小电压（如：NMOS，0.1V；PMOS，-0.1V）

阈值电压V\_TH(NMOS)=V\_tn=0.7V，V\_TH(PMOS)=V\_tp=-0.8V

![](image_DTq9UOgctZ.png)

#### MOSFET输出特性模型

以NMOS为例，PMOS的就是把所有正数值取负并把图像折到第三象限

指的是MOS管工作在一定V\_GS下，I\_D与V\_D(V\_DS)的关系，也即一族先升后趋于平稳的曲线

![](image_PMavajAzSS.png)

电流方程

![](image_l2WzKPtU5n.png)

K也即NMOS的K\_n（或PMOS的K\_p）

饱和态与非饱和态相交的临界状态，其偏置条件记作V\_DSAT。非饱和状态抛物线图像就是在其它参数给定时，把不同V\_GS代入（3-3）式得到一族抛物线，其在V\_DSAT以左的部分就是输出特性曲线中的非线性区

![](image_oaQQgfNIXD.png)

可用求顶点的办法求出V\_DSAT，恰为V\_GS-V\_TH(NMOS)

对于PMOS，下面的式子求的是I \_，DS的绝对值，V\_GS、V\_DS都用实际的值代入，也即正的就是正的，负的就是负的

![](image_9bxh1V8F1L.png)

#### MOSFET分相器

![](image_DRjbTNkVc_.png)

例3-9解答中V\_DS应等于I\_D×20kOhm-V\_DD=-1.789V，书上答案对而式子错

#### 体效应和阈值电压

![](image_ILNGp9lmZi.png)

![](image_aVcG8i9bhN.png)

![](image_ue99HDG7Gh.png)

上例中对于管N\_2，V\_SB=0一般不再成立，阈值电压将不再是一个常数

![](image_YGcIwZ8H4O.png)

![](image_V_4D6puBu6.png)

0725

# 第4章：金属互连线性质

集成电路的导电材料：金属互连线、多晶硅、扩散区

铜技术：接触孔和第一层金属用钨，上层通孔用铜；

铝技术：上层通孔用钨；

二者都需用阻挡金属（钽、氮化钽、磷化钴钨CoWP等）将金属区域封闭起来

#### 连线电阻

欠压/掉电（brownout）：因寄生电阻，实际供于逻辑门的V\_DD-GND不足标而使逻辑门变慢

![](image_4ssaDQqspi.png)

![](image_InfD8jSf1O.png)

TCR就是R(T)=R\_0\[1+α(T-T\_0)]中的α

薄膜电阻：R\_sheet=ρ/t，t为金属层厚度，可见单位是欧姆/平方

通孔电阻：影响RC时间常数（因为通孔被串入）从而影响可靠性。铜通孔底、侧常覆有氮化钽/氮化钛/磷化钴钨等质地的阻挡金属衬层以防止铜扩散污染氧化物介质，同时也可作为保护性的分流通路

【计算时注意阻挡金属的串/并/混联】

![](image_BlzdtGIy-_.png)

#### 连线电容

低k电介质：相对介电常数低于3.0，往往疏松多孔，强度和热循环性能较弱从而不易制造。低介电有利于减小RC时间常数并降低线间串扰电容耦合

#### 连线电感

很小的导线电感可产生很大的电压

估算高频直导线等效电感

![](image_Q9C4E0HR9X.png)

热量在电源中产生，电感元件的磁场储能而不产热

#### 互连线RC模型

**短线——电容模型**：

![](image_4rUeNxQ6VY.png)

内电阻R是对左图左边反相器输出端的等效内阻

![](image_joXlp4UwU4.png)

**长线——电阻电容模型**：

“较长的上层金属层通常承载较长的时钟线、控制线和数据总线，估算其τ时应特别小心”

![](image__nvwrgMhdz.png)

串联延时的**埃尔莫尔时间常数**表达式

![](image_AUGLrRoLag.png)

![](image_fRZLIYd1UC.png)

**片段法**分析长线时间常数

![](image_DxeqdjuBGA.png)

之后，再将这些R\_w、C\_w按分布RC网络接起来，以运用埃尔莫尔定律。例题见P73例4-17

![](image_qWVSlWVc4K.png)

0728

# 第5章：CMOS反相器

CMOS反相器“通-断串接”的方式保证了V\_DD与地之间始终没有电流，因而可见CMOS低功耗的特点；而输入电压区间映射到稳定输入状态的特性表明数字电路具有抗噪声能力

#### 静态电压转移曲线

**回顾**：CMOS反相器的电压转移曲线（VTC）

![](image_sjdYBnfazk.png)

晶体管工作状态：I区NMOS止，PMOS电阻区；II区NMOS饱和区，PMOS电阻区；III区NMOS、PMOS饱和区；IV、V区同理。III区的边界由两条直线确定：V\_in=V\_o+V\_tn和V\_in=V\_o-|V\_tp|（V\_tp本身是负值），该区曲线呈线性，其内的电压值不会被映射到任何逻辑电压（即该电压无逻辑定义）；阈值电压指的是V\_o=V\_in处的电压

![](image_GrOT4oZpZ7.png)

弱逻辑电压指的是略低于逻辑高电平或略高于逻辑低电平的电压，将牺牲部分噪声容限（输入的是一个弱逻辑电压时，对这个输入电压的噪声容限小了）和栅极驱动电压（相应降到栅-源之间的电压的绝对值也小了）

**转移曲线的对称化**

设置输入电压为阈值电压V\_M=V\_DD/2，使PMOS、NMOS饱和电流相等，结合式（3-2）求出宽比：

![](image_1T8X2kn-lO.png)

也可取其它V\_M使转曲线不对称。因迁移率很难确定，实际VTC难以严格对称，且W\_p通常不会做成W\_n的小数

#### 噪声容限

通常由制造商规定，**必须为正**

![](image_qbcTE1PuuB.png)

![](image_s4VV0cDDzh.png)

另一种定义方法是在VTC上找到斜率为-1的点作为边界，该方法的理由是容限以外的点将发生不期望的噪声放大

#### 电流转移曲线

即ITC，指I\_DD-V\_in曲线，即电源电流-输入特性

![](image_nUDcIpWIAF.png)

长沟道情况下，静态电流基本是漏极- 衬底反偏饱和电流，约为皮安级，故静态可认为无功耗。主要功耗来源在切换状态时的尖峰电流，其大小取决于**晶体管强度**（如宽长比、阈值电压、迁移率），可参照式（3-2）给出，也即用**其中一个**晶体管的饱和区方程就能解出。大型MPU总峰值电流可达几个安培

#### 动态电压转移曲线

描述不同翻转速度下的V\_o-V\_in关系。受寄生电容和负载影响，V\_in和V\_o的相位关系会因翻转速度而不同。高速翻转情形下，漏极相对栅极的延迟变得明显

![](image_Z68QYQq_2G.png)

C\_L代表漏极扩散区电容、互连线、负载逻辑门输入电容的效应；C\_coup为耦合电容，取决于偏置状态；（1）（2）（3）分别为中速、高速、超高速翻转对应曲线，这些曲线分为两支是因为快速翻转时漏极输出会因寄生电容而能够保持初态的电平。此外，C\_L也会影响曲线的形状和位置

![](image_49STb-JOYz.png)

增大C\_L会增大翻转时间从而延迟时序响应，输出电压一开始的过冲是由输入端通过C\_coup注入的电荷导致的，此时电源被短时充了电。输入发生翻转时，C\_coup试图维系上次的压差，其在上升沿输送的电荷到达C\_L且先于C\_L放电而被接受（其在下降沿自C\_L索取的电荷也先于C\_L充电而到达），故输入上升沿时在输出产生过冲，下降沿时产生欠冲

#### 翻转速度模型

简化模型：把翻转期间的MOS管看作持续输出饱和电流（如式(3-2)）的恒流源，

![](image_8RAl5x602y.png)

上升时间τ\_r是信号由0上升到V\_DD的时间（下降时间同理），有

![](image_w2rlWV-rk5.png)

注意：上述V\_GS=V\_DD应更正为V\_GS=-V\_DD，且V\_tp本身是带负号的。当V\_DD和|V\_tp|差不多时，延时趋于正无穷；而V\_DD>>|V\_tp|时，电源电压的微小扰动只带来很小的延时变化

![](image_l-bJg9yxyI.png)

实际由于彼侧晶体管对C\_L充/放电电荷的分流等作用，延时将比此处计算值大一些

#### 静态功耗

静态泄漏电流约为纳安数量级，由短沟道泄漏等因素引起。单个器件可忽略，大规模系统可相当大，控制起来很复杂

#### 瞬态功耗

瞬态功耗是逻辑门负载电容的充放电功耗。通常一个时钟周期内时钟网络中的逻辑门翻转两次，组合逻辑中的逻辑门翻转一次。以两次计，瞬态功耗为

![](image_R1tr94zPpf.png)

定义活跃系数α，表示一个时钟脉冲到来时可能翻转的逻辑门占比，若为单次翻转，则

![](image_UkUlkvPLXB.png)

#### 短路功耗

V\_tn\<V\_in\<V\_DD-|V\_tp|时，NMOS、PMOS均导通，V\_DD到地的电流造成的功耗约占总翻转功耗的5%\~30%，具体大小则取决于器件电流强度、输入翻转时间、输出电容等

为简化计算，设反相器对称无负载，输入为斜坡电压（先升后降），一个时钟周期内翻转两次，总电流在i-t图上可分割为四块相等的面积之和对整个周期取平均

![](image_iOIaZqY-6j.png)

![](image_ZviOtTZck0.png)

![](image_Wob9U9ydBU.png)

#### 功耗与电源电压调整

通常V\_DD减小可带来饱和电流的减小，从而降低动态功耗，而

![](image_Ud0beHqjt0.png)

当V\_DD\<V\_tn+|V\_tp|时，尽管翻转会变慢，但不存在上下两管同时导通的区域，故不会出现尖峰电流，功耗得以显著降低

![](image_q1y_ga0iJa.png)

注意：V\_DD=0.5V的曲线是V\_in从0.5V向0变化中反向扫描的，如果加上V\_in从0变到0.5V的正向扫描过程，则整个曲线表现出滞回特性

#### 缓冲级

作用：驱动负载

用过大W/L的MOS管驱动大电流负载是不现实的，因为栅极面积大即增加自身输入电容，这要求前级MOS管有更大的W/L

**锥形缓冲器**

![](image_70v_xa8O6f.png)

林霍尔姆，1975

将MOS管沟道宽度递增的逻辑门级联，一般也就是尺寸递增的反相器级联（如“定比例锥形缓冲器”）。

下级逻辑门（主要是其输入电容）视为上级输出端的负载电容，上级的W/L与该级负载电容成正比（相邻两级间比例系数均为α），反相器面积与MOS管沟道宽度成正比，尽可能优化各级传输延迟时间。设各级反相器驱动一个相同规格的反相器的时延均为τ，因各级反相器实际驱动输入电容α倍于自身的后级，故总时延为t\_d=n\*α\*τ，其中反相器级数n由关系C\_L=C\_in（首级）\*α^n确定。故t\_d=τ\*ln(C\_L/C\_in)\*α/lnα，对α求导得最优α\_opt=e，故最优级数n\_opt=ln(C\_L/C\_in)

0731

# 第6章：CMOS“与非”门、“或非”门和传输门

最常用的四种逻辑门依次为：反相器、触发器、二输入与非、二输入或非。与门和或门都是在与非、或非门基础上获得

非控制逻辑状态：比如与非门当一个输入为1时，输出只取决于另一个输入。在激活一个事件之前，通常将控制信号设于非控制逻辑状态

#### 与非门、或非门的晶体管尺寸调整

目的：实现相等的上升时间和下降时间&#x20;

在反相器中，为平衡PMOS管的低迁移率对电流的影响，往往把PMOS管的宽长比做成2\~3倍于NMOS管

由于无法保证每种逻辑状态都有相同的上升/下降时间（这要求每种逻辑状态的上拉/下拉电阻相同，而这在管子是选通的这一事实下根本不可能），故取最坏情况的上升/下降时间，令二者都等于一个反相器的相应时间。所谓最坏情况就是指上拉/下拉电阻最大的情况，并联支路中对应仅一条支路上的管子打开，串联支路中对应所有管子打开

与非门的主要问题是下拉部分驱动力受串联影响而不足

![](image_Ypg218eZWx.png)

例如当下拉部分由n个NMOS管串联而成时，每个NMOS管宽度应均为n

或非门的主要问题是上拉部分驱动力受串联影响不足，为维持和反相器相同的上拉强度，须令其成串联结构的m个PMOS管宽长比在本来就做大几倍的基础上继续扩大到（几m）倍

#### 通过门

![](image_m5acIicMIw.png)

缺点：在通过门中，NMOS管对逻辑1、PMOS管对逻辑0都是直传，没有进行信号（质量）的恢复

#### CMOS传输门

可以解决通过门信号传输质量的问题，也可用作模拟开关

两MOS管导通的输入电压范围交叠

![](image_iZ-AkEGTe2.png)

![](image_ksBraDhgxw.png)

另一种表示符号

![](image_HLr11smUKY.png)

输出为高阻态（悬空，高Z，三态）时，可能带来问题：栅极电压漂移可能引起逻辑状态错误

#### 实现三态的方法

第一种方法是在输出端加传输门，然而传输门关闭时输入端仍自顾自地产生翻转行为，会带来动态功耗

第二种方法是将传输门内嵌到所需电路中，传输门关门时，属于传输门部分的MOS管源极悬空，剩余部分脱耦，无功耗

![](image_z8O09RujTX.png)

0826

# 第7章：CMOS电路设计风格

第6章所述的设计是基于鲁棒性强、功耗低的互补静态设计风格，而高速运算中常使用较少考虑功耗的动态设计风格

#### 互补静态风格的设计准则与德摩根律

要实现什么逻辑，用下拉部分（NMOS）实现它的反（可运用德摩根律；最简单的办法是实现它，然后输出端接个反相器），而上拉部分直接取下拉部分的对偶就行了（无论何时）

例如，与是非的或非（AB=(A反+B反)反），则与门可以这么实现

![](image_jrfXYj47W_.png)

![](image_GFJK9-OQ95.png)

#### 动态CMOS逻辑门

类似于OD门

![](image_62m0omF9Gg.png)

所谓NMOS逻辑块，就是：要实现什么逻辑，就把这个逻辑的**反**用NMOS（下拉部分）搭建出来

全局时钟为低电平时，PMOS导通而下方NMOS（块、管）截止，输出端被预充电到高电平；

全局时钟为高电平时，PMOS截止，输出跟从NMOS逻辑块的输出，若为高电平（实际上是高阻态），因输出端已预充电，则节省了低→高翻转的时间，于是上升时间为0

![](image_j-D7L9HmWV.png)

#### 动态电路的电荷共享

当NMOS块完成求值而与地之间无导电通路时，预充电的电荷可能流入NMOS块

![](image_mnZOUwBqYs.png)

![](image__lVtR7Lk9f.png)

#### 多米诺CMOS逻辑门

![](image_hzM-6LFuUS.png)

在时钟信号为低电平时，强制输出端为0以防出现到地通路，由锁存晶体管将“悬空端”电平 (out反) 维持在高电平来实现。这可以解决电荷共享问题

当输出out为高电平时，PMOS截止，从而输出维持高电平；

当输出out为低电平时，PMOS导通，V\_DD到(out反)之间形成低阻通路，从而避免(out反)悬空。这样就降低了电路对节点电压漂移、噪声及电流泄漏的敏感性

![](image_WmwaXKhA4A.png)

因为有了反相器，所以NMOS块实现的就是想要得到的逻辑——相应地，上述方法也只能使用非反相逻辑门：

![](image_7txtqzBTKZ.png)

![](image_HVU0TIx7DA.png)

0827

#### NORA CMOS逻辑门

去除了输出缓冲级，但不会带来时钟和数据信号的竞争问题。全局时钟GC为低电平时，NMOS块、PMOS块输出端分别被预充电到高电平、低电平；GC为高电平时，从前级往后级依次开始逻辑块的计算

![](image_GlrKQTU635.png)

#### 通过逻辑门

参见：第6章；《数字设计·系统方法》

![](image_ffGFbcRu5-.png)

注意：图7-9的F输入端接的是以B为栅极输入的NMOS的源极，依此，图7-10的最终高电平输出将降低2\*V\_tn，这体现了通过管逻辑门的一个缺陷：损失电平信号质量

通过门电路的缺点还包括：①向晶体管链向信号通路引入较大负载阻抗，降低高频电平

#### CMOS传输逻辑门

一对互补的MOS管用于传输电平可改善单个通过晶体管的弱逻辑电平问题，可应用于某些设计如MUX

啊，摆上一张图走先啦

![](image_QNSl2AK9zi.png)

#### 功耗及活跃系数

参见《数字设计·系统方法》

负载电容充放电模型

![](image_YKD8aYTz4k.png)

时钟网络逻辑门电容充放电模型

![](image_4__VDYyd3E.png)

设p\_0表示输出为逻辑0的概率，p\_1=1-p\_0表示输出为逻辑1的概率，则输出由0变1的概率α\_0→1=p\_0\*p\_1；输出由1变0的概率α\_1→0=p\_1\*p\_0=α\_0→1。带入到表达式得α，就能求出IC因上升（或下降）翻转带来的功耗

![](image_l1x8RONbyx.png)

# 第8章：时序逻辑门设计与时序

正反馈是稳定记忆电路的关键所在

#### CMOS锁存器

![](image_bOJDEEycK3.png)

![](image_3gv0tXpzLu.png)

![](image_WGmN2NODN2.png)

![](image_kStMmfmfM-.png)

锁存器的输出直接取决于输入，故可能受噪声干扰引发问题，称为“透明”特性

![](image_N1C-Mk5Pir.png)

这是说，Clk由0变1时，T\_1导通，数据进入锁存器，此时T\_2必须保持可靠的关断，以防它的输出信号同新写入的数据构成竞争；稳定后，T\_2输入端和I\_1输入端信号是相等的，即使关T\_1开T\_2也不会产生电荷流动（若有流动，T\_2电荷的瞬时转移会影响D到Q的整体延时）

#### 边沿触发存储元件

![](image_xoweGQCXjN.png)

![](image_RQDLI3C4mF.png)

![](image_HDiZHUNGAy.png)

0828

#### 边沿触发时序规则

这部分要结合传输门控D触发器的主从结构来理解

![](image_bdWzLTGA92.png)

![](image_PyB2qhRbCs.png)

![](image_RwmO1dpvNv.png)

输入D需要保持稳定的最短时间=t\_su+t\_hold

![](image_ARMmhvz_oQ.png)

t\_su和t\_hold意味着输入信号要能够适当地早来和晚走，即应确保新数据到来之前所有结点稳定。违反时序规则可能导致时钟到Q的延迟时间变长，其中违反建立时间要求导致的时延来自主锁存器中反相器输入结点的电荷竞争，而违反保持时间要求导致的时延来自T\_1和主锁存器输入逻辑状态翻转时的竞争

![](image_sRW2TRfYwk.png)

**附加时延因素的时序规则**

可参见：数电课件、《数字设计：系统方法》

①当数据线（连D）有时延t\_D-delay（比如有门电路构成的逻辑环节）时：

![](image_zdBl_KBqSU.png)

D信号须更早来，以使等待时钟沿的是可靠的数据，即t\_su在原先基础上加t\_D-delay：

![](image_N9m3oZvCTE.png)

而因t\_D-delay的引发环节，D信号变化t\_D-delay之后Q才**开始**变化，故D早走不超过t\_D-delay这些时间都不影响Q保持上一状态t\_hold(FF)时间的要求：

![](image_dZYB2SSxxv.png)

这里因为Clk上升沿来时T\_1立即锁死，故无t\_D-delay时t\_hold是0。如果考虑t\_ccq则改写为t\_hold=t\_ccq-t\_D-delay

![](image__lgR0xT6S9.png)

注意：按照课上所学的理论，代入(8-1)式的t\_D-delay是尽可能大的值即信号的最长路径，而代入(8-2)的t\_D-delay是尽可能小的值即信号的最短路径

②当时钟线（连Clk）有时延t\_Clk-delay时：

![](image_h4n8QFcD4P.png)

所谓时钟沿仍是指新鲜的Clk这个信号的边沿，但传到各触发器时已经有了t\_Clk-delay的时延，不再是原来的时刻了，故而D信号在Clk信号本身达到时钟沿后还要等t\_Clk-delay时间让它传来才能发生改变：

![](image_7M4fk6Zf7R.png)

而同样由于t\_Clk-delay，D信号可以再晚来一会儿：

![](image_Ol3meT4_6d.png)

![](image_t_BWuGNS5f.png)

#### 时钟生成电路与锁相环

PCB上的晶振工作在低频（56\~144MHz），各芯片将晶振传递来的信号通过锁相环（PLL，一种专用变频电路）得到满足芯片工作需求频率的时钟信号。锁相环和时钟分布电路承担这样的功能：①低频转高频；②把时钟信号分布到巨量的存储记忆单元；③确保这些单元的时钟信号良好同步以实现稳定高频运算

![](image_dUlL5mn9Pe.png)

![](image_phNHj0OQZr.png)

**锁相环电路**

![](image_zJpOtqq7YJ.png)

①鉴相器

![](image_Uz5BxjVGU5.png)

![](image_o86Gb3kG8U.png)

该结构采用的D触发器，复位端是异步控制的

![](image_OjQVnf9Z6Y.png)

上面一段的说明可结合时序图（波形图）分析，毛刺是从时钟信号（f\_0sc、f\_0/N）到复位生效之间的延时，也就是由触发器和与门延时所造成的

0829

②电荷泵

![](image_x-YktKzO8r.png)

③滤波器

![](image__-JMi-cBUq.png)

④VCO

一种常见的设计是采用环形振荡器（RO）。RO之所以能看作压控振荡器，是由于其每一级反相器对负载电容充放电的能力（和时延是一回事）是工作电压V\_DD的函数：晶体管的电流驱动强度（和充电电流是一回事）取决于V\_DD，故而当V\_DD提高时，RO的频率提高。RO的频率对V\_DD和V\_SS的抖动很敏感

#### 金属互连线寄生效应的影响

![](image_ZPynsstp1x.png)

#### 整体系统时序

影响时钟信号精确部署的两大因素是**时钟漂移**和（电压）**抖动**

系统必须遵循两个主要的时序约束：**时钟周期约束**和**保持时间约束**

**时钟周期约束**

①先不考虑时钟漂移

![](image_bh7V_j46zN.png)

t\_cq可以直接理解为课上所学的t\_pcq；t\_logic就是（触发器数据端）前置逻辑模块的总延时

②考虑时钟漂移

可参见《数字设计：系统方法》

![](image_9AzIpOXT0y.png)

把式(8-7)改写成T\_period+δ=t\_cq+t\_logic+t\_su对于第一种情况更好理解，其他同理

③考虑时钟漂移和抖动

![](image_9-E3Gab-UP.png)

![](image_R7Eh2qyQgv.png)

**保持时间约束**

可参见《数字设计：系统方法》

以下分析均基于时钟的正向漂移，δ>0

①不考虑抖动

![](image_64iem1Q5ms.png)

![](image_Cs2mk2M7BV.png)

![](image_Lv0vKiKDS2.png)

同样，把式(8-9)改写成t\_hold+δ\<t\_cq,cd+t\_logic,cd更易理解，即触发器在**源**时钟沿到来时必须保持上一状态（以待T\_1关断）的时间必须不长于数据端得到可靠数据的预期最小延时，因存在延时而受δ限制——这对触发器本身的参数提出了更高要求

> **这里t\_hold是关乎触发器本身的参数！！！**

②考虑抖动

![](image_pzoxCAvTi3.png)

如果时钟是负向漂移，则并不会带来保持时间的问题，因为在数据传输被延时Clk的时钟信号启动之前，本级FF的时钟就已到达

> 此外，参数偏差将造成晶体管和互连线传输延时的变化。设计者必须对参数变化作出良好估计才能为时钟配置留出足够的容限

#### 时序的不确定性

环境噪声→电平噪声→最高工频

外界温度+芯片产热→芯片温度→路径延时（芯片随升温而变慢的道理：升温→载流子迁移率下降→晶体管饱和电流下降，驱动强度下降→负载充放电需时增加）

![](image_HhXKfnwoeE.png)

# 第9章：IC存储器电路

存储器的“随机”：每个地址都可以访问，与其他地址是独立的。与之相反的是那些地址由数据到达顺序决定的存储器，如FIFO、LIFO

SRAM比DRAM更快而更贵

#### 存储器电路结构

![](image_7vi7rJNykd.png)

m行n列，其地址位长m+n，存储单元总数为2^(m+n)

0830

#### 存储器单元

①基本SRAM单元

![](image_PMnOCeTj35.png)

wl为字线，bl及其反为位线。wl=0时，M\_5、M\_6（二者称为访问晶体管）关断，内部锁存器被隔绝；wl=1时，M\_5、M\_6打开，位线将数据传入/引出该单元以实现读/写操作

晶体管特意设计得比较弱以使位线的驱动强于单元内晶体管的强度

读操作也会激活访问晶体管，但位线和灵敏电路相连，其可访问而不改变存储单元内的逻辑状态

②包含预充电晶体管的SRAM单元

![](image_Yhfj5oXXOq.png)

位线接灵敏放大器（就是模拟电路中的所谓差分放大器），可利用其降噪特性实现更好的稳定性，并且相对于反相器还有反应灵敏、节省功耗的特点

读写操作都要预充电两条位线

![](image_Ye9DnoFzi0.png)

写操作时将写入的数据连入两条位线，其中一条数据是0，将存储单元中与之相连的结点电压下拉

#### 存储器译码

①行译码

![](image_ww0_-nplgb.png)

这种设计在位数（字长？）变高时将不够有效（例如8输入与非门是一个很差劲的选择——8个串联的NMOS管下拉强度极低），可应用预译码技术/预-预译码技术。该技术需在采用更小逻辑门的同时保证其物理尺寸满足行间距要求

![](image_dabK3r_QpQ.png)

![](image_-pg_89tOzY.png)

![](image_PvAN8xydD5.png)

②列译码

![](image_LOT9CndTQW.png)

注意：图中未画出与传输门中PMOS管相连的位线的“补线”（比如C\_0的“补线”是C\_0的反这根线），且关乎读/写控制的结构也未画出

#### 读操作

结构见图9-4

![](image_dzcsOkmwIY.png)

![](image_PzhE9lBEhR.png)

![](image_uWeZ6xixzb.png)

![](image_uVI5HMbd4k.png)

0831

通常记β为宽长比W/L

![](image__CwzAi2saM.png)

#### 写操作

一个有效的写操作指的是存储单元发生了电平翻转，否则不用写（保持就可以）

![](image_ZL2eIIuUH1.png)

![](image_Z1ytaFcjEH.png)

位线和它的“补线”先预充电，当字线激活（wl=1）时访问晶体管导通，电荷由V\_DD经存储单元环形结构中高电平结点X流向位线及其“补线”中较低电位者，使X电压被下拉，下拉到足够低即触发状态翻转。锁存器的环形结构中，某个结点电压超过V\_M（中点电压，是一个不稳定的中间态），整个锁存单元就会翻转状态，故而使写操作有效的位线电压下拉变化必须超过V\_M。实际上最好将该电压下拉到低于V\_tn以使图9-5中M\_1可靠截止从而保证完全翻转

![](image_koIZyyjZHU.png)

![](image_ZTxZafqvZM.png)

![](image_pVt0vn2MZd.png)

至于(Q反)由0到1的翻转，也就是Q由1到0的翻转，是由M\_3、M\_5控制的，而M\_3、M\_5尺寸与M\_4、M\_6的相同

![](image_gaWRsDe3hq.png)

CAS为列地址选择信号

![](image_mbXoZZIQfB.png)

#### DRAM

DRAM外围电路的复杂性导致它与生俱来地比SRAM慢，控制读写、刷新操作所需时钟的规模也远甚于SRAM

![](image_Q3GCVBznfS.png)

**3晶体管DRAM单元**

![](image_s1JOthaIEH.png)

![](image__XGYTRNJ1_.png)

可将写位线预充到V\_DD+V\_tn以补偿M\_3体效应带来的C\_S高电平削弱

**1晶体管DRAM单元**

![](image_LikfhSGb9M.png)

需要更复杂的外围电路；每次操作均会释放C\_S很大一部分电荷，因而每次操作都需要刷新

**刷新**

访问晶体管未导通时（如3晶体管DRAM单元M\_3截止时），电容上的电荷可能发生泄漏而影响其储存电平的质量（泄漏来自相邻反偏PN结、薄氧化层隧穿和相邻单元间泄漏等，如3晶体管DRAM单元中，C\_S上的电荷向M\_3漏极和M\_2栅极泄漏），其泄漏时间常数约为毫秒级。故可以快于其泄漏时间的频率（一般大于150kHz）刷新数据——“动态”意味着时钟持续保持开启。刷新电路在单元被读取时保存原始数据，读取完毕后再将该数据重载回该单元

# 第10章：PLA、CPLD与FPGA

#### 可编程晶体管

#### PLA

![](image_2jL6WN9b5g.png)

![](image_nw9AuPBawU.png)

![](image_3I8m2PJ9gh.png)

图10-3所示是“与”/“或”阵列都可编程的。有的构造是“与”阵列固定而“或”阵列可编程（或者反过来）的

![](image_wBI-vIRi2R.png)

CPLD在市场中已经取代了PLA

#### CPLD

包含触发器和较少的大逻辑模块，主要用于简单的接口逻辑。已被编程的CPLD在上电时就可起作用，且相对FPGA，其有更简单的构造、更快的速度、更可预测的I/O时序

![](image_rkstErXuun.png)

![](image_e3vdBtZaDO.png)

还可通过以适当的输出使能信号控制输出缓冲器处于三态，即将这个模块置之不用

#### 先进CPLD示例

看不懂

![](image_EKndMIo4FD.png)

![](image_W6uudpmk4V.png)

![](image_e6IAHEU8YH.png)

![](image_Swa6WLYDwr.png)

![](image_GtipBbAhVE.png)

![](image_iXd4k5E_1b.png)

![](image_hkJWIvDzn3.png)

![](image_Q1zDANrT_w.png)

![](image_eY_xF0o9pH.png)

#### FPGA

包含大量带触发器的小型模块，可实现非常复杂的系统。与CPLD相比，其单位逻辑门成本更低（且通常是易失性的）；需要在上电时配置一些支持逻辑

![](image_px-uzqpxci.png)

![](image_P6p7FHE5Iz.png)

![](image_JACEy0O8yt.png)

#### FPGA实例

![](image_UHsUIA7u_c.png)

![](image_Cjs9plNEKn.png)

![](image_rwmm7NfM_8.png)

![](image_oGXj8xFNim.png)

![](image_WNPlJcxZGQ.png)

![](image_uog3GRCFy7.png)

![](image_fHOerzUTeA.png)

#### 编程写入技术

**反熔丝技术**

当一个编程电流被夹在反熔丝器件上时，大电流在小面积上产生大的功率耗散，熔断绝缘层，导致其由开路变成短路。该技术是一次性的，可通过多晶硅-扩散区反熔丝或金属-金属反熔丝两种结构实现

多晶硅-扩散区反熔丝在多晶硅与重掺杂的n+扩散区之间加入氧-氮-氧（ONO）层，形成PLICE结构

![](image_EZuzc3uRVK.png)

金属-金属反熔丝将无定形硅夹在两层金属互连层之间，当读出电流相对编程电流可比或更大时，可能产生读出扰动机制。相比多晶硅-扩散区结构，其具有更低尺寸与更小寄生电容

![](image_puG8AFKDZk.png)

**EEPROM技术**

![](image_QXiRorjQwX.png)

**静态RAM开关技术**

![](image_UFhHS7btU6.png)

Finish at 2023/8/31 15:55

0727

# 第11章：CMOS电路版图

这句话惊到孩子了

![](image_GLRDsu8UbD.png)

#### 版图和DR

DR（设计规则）中含有：

间隔大小：多晶硅栅线条超出源漏扩散区的最小长度，保证此指标以消除源漏之间的电荷泄漏

多晶硅尺寸：晶体管的最小宽度和长度

金属和接触孔的最小尺寸

扩散区和接触孔的重叠大小

多晶硅和接触孔的间距

电源线和地线载流大因而较宽

一个集成电路中所有晶体管通常具有相同最小栅极长度

![](image_sUcdKx4-_f.png)

图中矩形A的短边即晶体管栅极长度；版图的每一层通常对应一个单独的掩模

#### 棒图

一种简单快速描述版图原理的工具，可用于建立晶体管原理图到版图的快速变换，其可呈现晶体管的位置、电源线、信号线和接触孔等

![](image_MKJUrbxbAX.png)

信号线长度取短利用减小信号线电容；电源线和地线的电容有助于缓冲电源环上电平的瞬变

#### 实例：2微米设计规则

![](image_lyotmdS8TL.png)

![](image_6mHL2P033L.png)

#### 电路提取

计算机可以通过一个特定扩散层和多晶硅层的与运算判定该位置是否存在晶体管及晶体管种类，据此计算机可画出原理图

0726

# 第12章：芯片是如何制作的

CMOS电路中阱、扩散区（漏/源）、多晶硅栅、接触孔、通孔和金属互连线各自对应一个掩模版（和版图图形）

#### 晶圆制备

硅晶圆片的一个参考尺寸：直径二三百毫米，厚500微米

二氧化硅→（还原）→多晶硅→（熔融、利用籽晶作晶核结晶）→大块单晶硅（硅锭，可能已进行掺杂）→（机械磨圆）→（金刚石锯切）→（加热退火以重构锯损）

#### 生产线

前端：晶体管构造

后端：金属接触孔、通孔和金属层（互连线）操作，在晶体管源漏、多晶硅栅表面覆盖金属硅化物（硅化钽、硅化钛等）以降低接触电阻从而提速

#### 硅的氧化

首先在晶圆表面生长约1微米厚的氧化层

二氧化硅的作用：①将元器件与金属互连线绝缘并提供物理支持；②作栅氧层；③掩蔽，使注入离子各得其所

![](image_H7SFtl7VJg.png)

氧化特征：①边反应边扩散；②产物隆起形成台阶（二氧化硅的摩尔体积比硅大，书上说原子体密度大恐怕不妥）

#### 光刻

使用光选择性去除表面薄膜或大块衬底，以将几何图形从光学的掩模版转移到覆于衬底的光刻胶上

光刻胶（photoresist，简称为resist）是一种感光化学材料，使用时将其滴于硅片上，高速旋转硅片将其抹匀（约厚1微米）。正胶比负胶在现代集成电路中具有更好的制造更小尺度的特性，因而被更广泛使用，其性质是受紫外线照射断键，因而光刻后在被掩模版遮蔽的部分留下胶

掩模版由玻璃或石英制成，不透光区覆铬

优点：利于精确控制成形形状和尺寸

问题：对表面平整度和环境洁净度要求高

可见光的最短波长约为350nm，故而当今先进工艺光刻出的图形是不能被光学显微镜观察的

用CVD在外延层（先进的CMOS工艺这样做以减小闩锁效应影响）和二氧化硅之上沉积一层氮化硅牺牲（缓冲）层，用于在蚀刻中对栅氧层提供保护，之后该牺牲层会被除去

#### 蚀刻

移除二氧化硅或氮化硅这样的介电材料，分为干法和湿法

干法：高能卤素气体（F、Cl）/氯化物/氟化物轰击接地硅片表面，加以低压和13.56MHz射频场，将源气体转为自由基对裸硅进行蚀刻，具有各向异性，在小几何尺度的现代集成电路中使用广泛

湿法：用强酸/强碱进行化学蚀刻，各向同性

蚀刻步骤会将留作生成厚的场氧、浅沟槽隔离区（比如在CMOS反相器中将p沟道和n沟道隔离开的区域）暴露在外，而薄的栅氧层因有氮化硅牺牲层保护而免遭侵蚀，蚀刻完毕后会经CMP除去牺牲层并将整个表面平坦化

![](image_Y72c4HY8PZ.png)

#### 沉积和扩散

**CVD**：高温下多种分子和原子在硅片表面反应，将一层薄膜（比如氮化硅）沉积在硅片表面，温度通常为600\~900℃（不能过高，以防杂质原子发生明显扩散位移），工艺工程师需参考热预算

![](image_tewmzI4ysm.png)

![](image_M8penCuYsn.png)

**外延层**：在衬底表面生长出薄而掺杂的硅单晶，用于防止闩锁效应

**扩散**：是构成深阱（>0.5微米）和形成漏/源的主导工艺，固体中的动态扩散规律可用费克(Fick)定律建模，杂质浓度随深度的变化曲线由浅到深呈高斯分布曲线半边的形态

**离子注入**：在更精确（如阱深<300nm，源-漏结深<200nm）的纳米级技术中应用离子注入取代传统扩散工艺。先反应将原子转为离子态，再加速射入硅衬底。离子注入深度取决于其碰撞能量，注入总量取决于其通量（单位时间单位面积垂直通过的离子数），在注入深度处杂质浓度呈高斯分布

离子注入使用二氧化硅或氮化硅作掩模，施行注入时能精确控制其掺杂深度和浓度。其副效应是高能离子带来晶格损伤，可应用RTA恢复。RTA使用大功率照灯在约20s内加热硅片至约千度，保温1\~2min后行快速冷却，以减小高温下较强扩散对期望浓度分布的影响

#### 清洁和安全性操作

用高纯的去离子水、有机溶剂、酸或碱去除杂质颗粒

集成电路的成品率随芯片尺寸减小而改善，这建立在引起破坏的杂质颗粒数相对固定的假设之下，然而这一性质是正确的

#### 晶体管的制造

用STI实现电气隔离，将二氧化硅CVD入浅沟槽并进行表面抛光磨去多余部分，再沉积一层薄栅氧层和一层多晶硅栅，通过光刻、蚀刻使这两层在沟道区被保留下来，再对沟道区侧边行离子注入，此时保留的多晶硅充当掩模从而使离子仅注入期望的扩散区

![](image_BpRgYrQN2d.png)

最后可能还要在晶体管表面生长一层二氧化硅绝缘层

**下面的部分属于生产线后端工艺**

#### 溅射工艺

低温低压环境下，用高压电离出的氩离子碰撞阴极金属靶，弹出金属原子沉积于硅片上，同时会由做功将其加热，可用于沉积金属、合金、电介质，铜互连中沉积钨（作为接触孔和第一层金属的平面连线）或铜

#### 双金属镶嵌

又称大马士革工艺，是将通孔和平面连线的构造合二为一的方法，比分开做更省成本

首先进行清洁，用光刻胶、辐照、冲洗、离子铣干法完成通孔和平面互连线的沟槽的蚀刻，这些步骤因孔较微小而比较困难（因而通孔成为集成电路缺陷的主要发生位置）

然后在通孔和沟槽底部与边界沉积一层阻挡金属（如氮化钽），尽可能保持其相当于金属宽度10%的厚度

再从阻挡金属上沉积一层薄的铜籽晶，用于电镀的引流。电镀浴处理硅片以使铜填充属于通孔和沟槽的空隙

再用CMP去除多余铜以获得光滑平整的表面：首先软化表面，之后利用抛光片、打磨浆除铜【CMP也是光刻工艺的中间环节，用于获得平整表面以使覆胶能在同一平面内聚焦紫外光】

最后覆一层氮化硅于表面，将已经由CMP实现隔离的铜互连进行包裹（钝化？）

#### 层间电介质

层间电介质用于实现连线间电气隔离，会引入耦合电容，因而应选择低K介质

#### 制造一个双阱CMOS反相器

双阱即兼具一个p阱和n阱，两口阱【大概是】基本并排放置的，不同于n阱CMOS是n阱建在p体硅之上

**前端工艺操作**

首先用CVD在硅片上生长一层p-外延层，然后生长薄的氧化层，覆以氮化硅牺牲层，将牺牲层光刻、转印成图形以保护栅氧层区域，之后蚀刻以暴露场氧区和STI，此时栅氧层仍覆于牺牲层下受到保护。场氧区和STI将由CVD生长出氧化层（之所以要用牺牲层保护栅氧层，大概是由于不希望栅氧层也在此轮生长得如场氧区那么厚），再CMP去除牺牲层并予以平坦化，现在留下的二氧化硅为场氧区厚层、STI和薄的栅氧层【这一大步包含了场区氧化的内容，然而n阱甚至尚未形成，在步骤顺序上和北大版有所不同】

之后给整个硅片生长氮化硅厚层，在此厚层上光刻、蚀刻出n阱区（此时还被栅氧层覆盖着），注意是双阱CMOS，此时先进行n阱的生成，即注入砷到栅氧层下硅-二氧化硅的交界面。再注入硼可调节PMOS阈值电压，此时先构造出了PMOS的阱区

类同n阱的造法再造出p（对应NMOS）阱区和调节阈值电压，完后CMP去除牺牲层并平整表面

通过另一层氮化硅经光刻、蚀刻在栅区构造多晶硅栅（NMOS用n+掺杂，PMOS用p+掺杂以提高栅极导电性），硅栅作为阻挡可导引接下来注入的杂质离子分别在其两侧形成漏区和源区。用干法蚀刻去掉多余的薄氧化层（暴露于多晶硅栅以外边缘的部分）

最后整个表面生长一层氧化绝缘层（钝化处理）

**后端工艺操作**

在晶体管扩散区（大概是形成沟道的地方）和栅区生成硅化物以降低接触电阻

溅射钨，在定义、蚀刻好的地方形成钨沟槽（作为第一级互连线系统与接触孔，以防铜向底层硅扩散），大马士革工艺形成更高层铜互连，整个期间辅以CMP以平整表面。最后覆氮化硅钝化保护（防锉、防潮、防污染）

#### 封测

“业内90%芯片失效由封装问题导致”

![](image_3nIzj7q0HA.png)

测试操作功能和引脚参数，其过程复杂且烧钱
